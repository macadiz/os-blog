# =============================================================================
# OS Blog - Docker Environment Configuration
# =============================================================================
# This file contains ALL environment variables needed to run the Docker image.
# Copy this file to .env and update the values for your deployment.
#
# REQUIRED variables are marked with [REQUIRED]
# OPTIONAL variables have default values shown in comments
#
# For development (non-Docker), see apps/backend/.env.example instead.
# =============================================================================

# =============================================================================
# SECURITY CONFIGURATION (REQUIRED)
# =============================================================================

# [REQUIRED] PostgreSQL database password
# SECURITY: Must be at least 8 characters (32+ recommended for production)
# Used for both local and external PostgreSQL databases
POSTGRES_PASSWORD=your_secure_database_password_change_this

# [REQUIRED] JWT Secret for authentication tokens
# SECURITY: Must be at least 32 characters (64+ recommended for production)
# Generate with: openssl rand -base64 48
JWT_SECRET=your_super_secret_jwt_key_at_least_32_characters_long_change_this_in_production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Host
# - "localhost" = Use local PostgreSQL inside container (default)
# - Any other host = Connect to external PostgreSQL (AWS RDS, Azure, etc.)
# Default: localhost
POSTGRES_HOST=localhost

# PostgreSQL Port
# Default: 5432
POSTGRES_PORT=5432

# PostgreSQL Database Name
# Default: open_blog
POSTGRES_DB=open_blog

# PostgreSQL Username
# Default: blog_user
POSTGRES_USER=blog_user

# [OPTIONAL] Full Database Connection String
# If provided, overrides individual POSTGRES_* variables above
# Use this for external databases with custom connection parameters
# Example for AWS RDS:
# DATABASE_URL=postgresql://username:password@db.example.com:5432/dbname?sslmode=require
# Example for Azure:
# DATABASE_URL=postgresql://username@servername:password@servername.postgres.database.azure.com:5432/dbname?sslmode=require
# DATABASE_URL=

# =============================================================================
# JWT CONFIGURATION
# =============================================================================

# JWT Token Expiration Time
# Format: "7d" (days), "24h" (hours), "60m" (minutes)
# Default: 7d
# JWT_EXPIRES_IN=7d

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Node Environment
# Values: production, development
# Default: production (in Docker)
# NODE_ENV=production

# Backend API Port (internal to container)
# Default: 3000
# PORT=3000

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed CORS Origins (comma-separated)
# IMPORTANT: Set to your actual domain(s) in production
# Examples:
#   - Single domain: https://yourdomain.com
#   - Multiple domains: https://yourdomain.com,https://www.yourdomain.com
#   - With www: https://blog.example.com,https://www.blog.example.com
# Default: http://localhost
CORS_ORIGINS=http://localhost

# CORS: Allow Credentials
# Set to "true" to allow cookies/auth headers in CORS requests
# Default: true
# CORS_ALLOW_CREDENTIALS=true

# CORS: Max Age (in seconds)
# How long browsers cache CORS preflight responses
# Default: 86400 (24 hours)
# CORS_MAX_AGE=86400

# =============================================================================
# URL CONFIGURATION (OpenGraph, SEO, Email Links)
# =============================================================================

# Base URL for the application
# IMPORTANT: Set to your actual domain in production for:
#   - OpenGraph meta tags (social media sharing)
#   - Email links (password reset, invitations)
#   - RSS feed links
#   - Sitemap URLs
# Examples:
#   - Development: http://localhost
#   - Production: https://yourblog.com
#   - Subdomain: https://blog.yourdomain.com
# Default: http://localhost
BASE_URL=http://localhost

# =============================================================================
# STATIC PAGE GENERATION (OpenGraph Meta Tags)
# =============================================================================

# Webhook URL for automatic static page regeneration
# Used when posts are created/updated to regenerate SEO meta tags
# Only change if you're running webhook on different host/port
# Default: http://localhost:3002/regenerate-static
# STATIC_GENERATOR_WEBHOOK_URL=http://localhost:3002/regenerate-static

# API URL for static page generator (usually internal)
# Default: http://localhost:3000
# API_URL=http://localhost:3000

# Webhook Server Port
# Default: 3002
# WEBHOOK_PORT=3002

# Distribution Directory (where built frontend files are)
# Default: ./dist (after Docker setup moves files)
# DIST_DIR=./dist

# =============================================================================
# PRODUCTION SECURITY SETTINGS
# =============================================================================

# Force HTTPS Redirect
# Set to "true" to redirect all HTTP requests to HTTPS
# IMPORTANT: Only enable if behind a reverse proxy (nginx, cloudflare, etc.)
# Default: false
# FORCE_HTTPS=false

# Trust Proxy Headers
# Set to "true" if behind a reverse proxy (nginx, AWS ELB, Cloudflare, etc.)
# Needed to correctly detect client IP and protocol (http/https)
# Default: false
# TRUST_PROXY=false

# =============================================================================
# LOGGING
# =============================================================================

# Log Level
# Values: error, warn, log, debug, verbose
# Default: log
# LOG_LEVEL=log

# =============================================================================
# EXAMPLE CONFIGURATIONS FOR DIFFERENT DEPLOYMENTS
# =============================================================================

# -----------------------------------------------------------------------------
# EXAMPLE 1: Local Development (Docker with local PostgreSQL)
# -----------------------------------------------------------------------------
# POSTGRES_PASSWORD=mysecretpassword
# JWT_SECRET=my-super-secret-jwt-key-at-least-32-chars-long
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=open_blog
# POSTGRES_USER=blog_user
# CORS_ORIGINS=http://localhost
# BASE_URL=http://localhost

# -----------------------------------------------------------------------------
# EXAMPLE 2: Production with External PostgreSQL (AWS RDS)
# -----------------------------------------------------------------------------
# POSTGRES_PASSWORD=your_rds_password
# JWT_SECRET=production-jwt-secret-at-least-64-chars-for-security
# POSTGRES_HOST=mydb.abc123.us-east-1.rds.amazonaws.com
# POSTGRES_PORT=5432
# POSTGRES_DB=blog_production
# POSTGRES_USER=blog_admin
# CORS_ORIGINS=https://yourblog.com,https://www.yourblog.com
# BASE_URL=https://yourblog.com
# FORCE_HTTPS=true
# TRUST_PROXY=true
# LOG_LEVEL=warn

# -----------------------------------------------------------------------------
# EXAMPLE 3: Production with DATABASE_URL (DigitalOcean, Heroku, etc.)
# -----------------------------------------------------------------------------
# POSTGRES_PASSWORD=not_used_when_DATABASE_URL_set
# JWT_SECRET=production-jwt-secret-at-least-64-chars
# DATABASE_URL=postgresql://user:pass@db.example.com:25060/blog?sslmode=require
# CORS_ORIGINS=https://blog.example.com
# BASE_URL=https://blog.example.com
# FORCE_HTTPS=true
# TRUST_PROXY=true

# -----------------------------------------------------------------------------
# EXAMPLE 4: Production Behind Cloudflare/Nginx Reverse Proxy
# -----------------------------------------------------------------------------
# POSTGRES_PASSWORD=secure_password_here
# JWT_SECRET=production-jwt-secret-minimum-64-characters-recommended
# POSTGRES_HOST=localhost
# POSTGRES_DB=open_blog
# POSTGRES_USER=blog_user
# CORS_ORIGINS=https://yourdomain.com
# BASE_URL=https://yourdomain.com
# FORCE_HTTPS=true
# TRUST_PROXY=true
# JWT_EXPIRES_IN=7d
# LOG_LEVEL=warn