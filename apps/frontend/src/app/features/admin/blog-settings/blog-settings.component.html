<div class="max-w-4xl mx-auto p-6">
  <ui-card variant="default" size="lg" [header]="true">
    <div slot="header">
      <h1 class="text-2xl font-bold themed-text">Blog Settings</h1>
      <p class="themed-text-secondary mt-1">
        Manage your blog's general settings and appearance
      </p>
    </div>

      <!-- Loading state -->
      <div *ngIf="loading" class="text-center py-8">
        <div class="inline-flex items-center">
          <span class="material-symbols-outlined animate-spin mr-2"
            >refresh</span
          >
          Loading settings...
        </div>
      </div>

      <!-- Error message -->
      <div
        *ngIf="error"
        class="bg-red-50 border border-red-200 rounded-md p-4 mb-6"
      >
        <div class="flex">
          <span class="material-symbols-outlined text-red-400 mr-2">error</span>
          <span class="text-red-700">{{ error }}</span>
        </div>
      </div>

      <!-- Success message -->
      <div
        *ngIf="message"
        class="bg-green-50 border border-green-200 rounded-md p-4 mb-6"
      >
        <div class="flex">
          <span class="material-symbols-outlined text-green-400 mr-2"
            >check_circle</span
          >
          <span class="text-green-700">{{ message }}</span>
        </div>
      </div>

      <!-- Settings Form -->
      <form
        [formGroup]="settingsForm"
        (ngSubmit)="onSubmit()"
        *ngIf="!loading"
        class="space-y-6"
      >
        <!-- Blog Title -->
        <ui-input
          label="Blog Title"
          type="text"
          placeholder="Enter your blog title"
          [required]="true"
          [state]="hasError('blogTitle') ? 'error' : 'default'"
          [errorMessage]="hasError('blogTitle') ? getErrorMessage('blogTitle') : ''"
          formControlName="blogTitle"
        ></ui-input>

        <!-- Blog Description -->
        <ui-textarea
          label="Blog Description"
          placeholder="Describe your blog..."
          [rows]="4"
          [state]="hasError('blogDescription') ? 'error' : 'default'"
          [errorMessage]="hasError('blogDescription') ? getErrorMessage('blogDescription') : ''"
          formControlName="blogDescription"
        ></ui-textarea>

        <!-- Logo Upload -->
        <div>
          <label class="block text-sm font-medium themed-text-label mb-2">
            Blog Logo
          </label>
          <app-file-upload
            [config]="logoUploadConfig"
            [currentFileUrl]="currentLogoUrl"
            [disabled]="saving"
            (fileUploaded)="onLogoUploaded($event)"
            (fileRemoved)="onLogoRemoved()"
            (uploadError)="onUploadError($event)"
          >
          </app-file-upload>
          <p class="mt-1 text-xs themed-text-secondary">
            Recommended: 200x60px or similar ratio, max 2MB
          </p>
        </div>

        <!-- Favicon Upload -->
        <div>
          <label class="block text-sm font-medium themed-text-label mb-2">
            Favicon
          </label>
          <app-file-upload
            [config]="faviconUploadConfig"
            [currentFileUrl]="currentFaviconUrl"
            [disabled]="saving"
            (fileUploaded)="onFaviconUploaded($event)"
            (fileRemoved)="onFaviconRemoved()"
            (uploadError)="onUploadError($event)"
          >
          </app-file-upload>
          <p class="mt-1 text-xs themed-text-secondary">
            Recommended: 32x32px or 16x16px, max 1MB
          </p>
        </div>

        <!-- Theme -->
        <div class="space-y-2">
          <ui-select
            label="Look & Feel"
            formControlName="theme"
            [options]="themeOptions"
            (selectionChange)="onThemeChange($event)"
          ></ui-select>
          <p class="text-sm themed-text-secondary">
            Preview changes instantly by selecting a theme. Changes will be saved when you submit the form.
          </p>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-end pt-4 themed-border border-t">
          <ui-button
            type="submit"
            variant="primary"
            size="md"
            [disabled]="settingsForm.invalid || saving"
            [loading]="saving"
            [prefixIcon]="!saving ? 'save' : ''"
          >
            {{ saving ? "Saving..." : "Save Settings" }}
          </ui-button>
        </div>
      </form>
  </ui-card>
</div>
